
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A comprehensive guide for staff engineers and technical leaders">
      
      
      
      
        <link rel="prev" href="../cicd/">
      
      
        <link rel="next" href="../advanced-testing-strategies/">
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.15">
    
    
      
        <title>Test-Driven Development - Staff Engineer's Field Guide</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#test-driven-development-design-through-testing" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="Staff Engineer&#39;s Field Guide" class="md-header__button md-logo" aria-label="Staff Engineer's Field Guide" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Staff Engineer's Field Guide
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Test-Driven Development
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../intro/" class="md-tabs__link">
          
  
  
    
  
  Field Guide

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../reference/tags/" class="md-tabs__link">
          
  
  
    
  
  Reference

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Staff Engineer&#39;s Field Guide" class="md-nav__button md-logo" aria-label="Staff Engineer's Field Guide" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Staff Engineer's Field Guide
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
      
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../intro/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Field Guide
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Field Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_2" >
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Staff Engineer Archetypes
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            Staff Engineer Archetypes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../intro/tech-lead/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    The Tech Lead
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../intro/architect/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    The Architect
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../intro/solver/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    The Solver
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../intro/right-hand/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    The Right Hand
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../intro/force-multiplier/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Becoming a Force Multiplier
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../learning/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Continuous Learning
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_3" id="__nav_2_3_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            Continuous Learning
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../learning/developing-expertise/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Developing Expertise
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../learning/mentorship-sponsorship/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Mentorship & Sponsorship
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../learning/staying-current/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Staying Current
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../learning/learning-organization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    The Learning Organization
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../learning/teaching-to-learn/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Teaching to Learn
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Engineering Excellence
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_4" id="__nav_2_4_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            Engineering Excellence
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../site-reliability-engineering/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Site Reliability Engineering
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../continuous-delivery/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Continuous Delivery
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cicd/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CI/CD
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Test-Driven Development
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Test-Driven Development
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#the-scenario" class="md-nav__link">
    <span class="md-ellipsis">
      The Scenario
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#what-tdd-is-and-isnt" class="md-nav__link">
    <span class="md-ellipsis">
      What TDD Is (and Isn't)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="What TDD Is (and Isn&#39;t)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tdd-is" class="md-nav__link">
    <span class="md-ellipsis">
      TDD Is:
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tdd-isnt" class="md-nav__link">
    <span class="md-ellipsis">
      TDD Isn't:
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-tdd-cycle-red-green-refactor" class="md-nav__link">
    <span class="md-ellipsis">
      The TDD Cycle: Red, Green, Refactor
    </span>
  </a>
  
    <nav class="md-nav" aria-label="The TDD Cycle: Red, Green, Refactor">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-red-write-a-failing-test" class="md-nav__link">
    <span class="md-ellipsis">
      1. Red: Write a Failing Test
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-green-write-just-enough-code-to-pass" class="md-nav__link">
    <span class="md-ellipsis">
      2. Green: Write Just Enough Code to Pass
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-refactor-improve-the-implementation" class="md-nav__link">
    <span class="md-ellipsis">
      3. Refactor: Improve the Implementation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tdd-as-a-design-tool" class="md-nav__link">
    <span class="md-ellipsis">
      TDD as a Design Tool
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TDD as a Design Tool">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-interfaces-before-implementation" class="md-nav__link">
    <span class="md-ellipsis">
      1. Interfaces Before Implementation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-separation-of-concerns" class="md-nav__link">
    <span class="md-ellipsis">
      2. Separation of Concerns
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-just-enough-generalization" class="md-nav__link">
    <span class="md-ellipsis">
      3. Just Enough Generalization
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing-patterns-for-different-code-types" class="md-nav__link">
    <span class="md-ellipsis">
      Testing Patterns for Different Code Types
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Testing Patterns for Different Code Types">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-domain-logic-and-algorithms" class="md-nav__link">
    <span class="md-ellipsis">
      1. Domain Logic and Algorithms
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-object-oriented-code" class="md-nav__link">
    <span class="md-ellipsis">
      2. Object-Oriented Code
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-external-dependencies" class="md-nav__link">
    <span class="md-ellipsis">
      3. External Dependencies
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced-testing-patterns-for-complex-systems" class="md-nav__link">
    <span class="md-ellipsis">
      Advanced Testing Patterns for Complex Systems
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Advanced Testing Patterns for Complex Systems">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-xunit-test-patterns-approach" class="md-nav__link">
    <span class="md-ellipsis">
      The xUnit Test Patterns Approach
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#common-tdd-challenges-and-solutions" class="md-nav__link">
    <span class="md-ellipsis">
      Common TDD Challenges and Solutions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Common TDD Challenges and Solutions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-tdd-is-too-slow" class="md-nav__link">
    <span class="md-ellipsis">
      1. "TDD is too slow"
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-i-dont-know-what-to-test-first" class="md-nav__link">
    <span class="md-ellipsis">
      2. "I don't know what to test first"
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-my-code-has-too-many-dependencies-to-test-easily" class="md-nav__link">
    <span class="md-ellipsis">
      3. "My code has too many dependencies to test easily"
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-tests-become-brittle-and-maintenance-heavy" class="md-nav__link">
    <span class="md-ellipsis">
      4. "Tests become brittle and maintenance-heavy"
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#scaling-tdd-from-individual-practice-to-team-culture" class="md-nav__link">
    <span class="md-ellipsis">
      Scaling TDD: From Individual Practice to Team Culture
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Scaling TDD: From Individual Practice to Team Culture">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-lead-by-example" class="md-nav__link">
    <span class="md-ellipsis">
      1. Lead by Example
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-provide-the-right-tools" class="md-nav__link">
    <span class="md-ellipsis">
      2. Provide the Right Tools
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-establish-testing-norms" class="md-nav__link">
    <span class="md-ellipsis">
      3. Establish Testing Norms
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-address-systemic-barriers" class="md-nav__link">
    <span class="md-ellipsis">
      4. Address Systemic Barriers
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced-tdd-techniques" class="md-nav__link">
    <span class="md-ellipsis">
      Advanced TDD Techniques
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Advanced TDD Techniques">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-outside-in-tdd-aka-london-school" class="md-nav__link">
    <span class="md-ellipsis">
      1. Outside-In TDD (aka "London School")
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-property-based-testing" class="md-nav__link">
    <span class="md-ellipsis">
      2. Property-Based Testing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-mutation-testing" class="md-nav__link">
    <span class="md-ellipsis">
      3. Mutation Testing
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#common-pitfalls-how-to-avoid-them" class="md-nav__link">
    <span class="md-ellipsis">
      Common Pitfalls &amp; How to Avoid Them
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#a-practical-exercise-the-broken-calculator" class="md-nav__link">
    <span class="md-ellipsis">
      A Practical Exercise: The Broken Calculator
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cross-reference-navigation" class="md-nav__link">
    <span class="md-ellipsis">
      Cross-Reference Navigation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Cross-Reference Navigation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prerequisites-for-this-chapter" class="md-nav__link">
    <span class="md-ellipsis">
      Prerequisites for This Chapter
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#related-concepts" class="md-nav__link">
    <span class="md-ellipsis">
      Related Concepts
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#apply-these-concepts" class="md-nav__link">
    <span class="md-ellipsis">
      Apply These Concepts
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#next-steps-in-your-learning-journey" class="md-nav__link">
    <span class="md-ellipsis">
      Next Steps in Your Learning Journey
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#further-reading" class="md-nav__link">
    <span class="md-ellipsis">
      Further Reading
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../advanced-testing-strategies/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Advanced Testing Strategies
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../clean-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Clean Architecture
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../evolutionary-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Evolutionary Architecture
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../supply-chain-security/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Supply Chain Security
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../software-supply-chain-security/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Software Supply Chain Security
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../devops/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DevOps & Automation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../git-practices/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Git Best Practices
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../source-control/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Source Control
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../code-hygiene/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Code Hygiene & Refactoring
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../adrs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Architecture Decision Records
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../hexagonal-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Hexagonal Architecture
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../story-mapping/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Story Mapping & Splitting
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chaos-engineering/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chaos Engineering
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_5" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../thinking/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Critical Thinking
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_5" id="__nav_2_5_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_5">
            <span class="md-nav__icon md-icon"></span>
            Critical Thinking
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../thinking/mental-models/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Mental Models for Engineers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../thinking/algorithmic-decision-making/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Algorithmic Decision-Making
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../thinking/cognitive-biases/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Cognitive Biases
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../thinking/structured-problem-solving/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Structured Problem-Solving
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../thinking/mind-mapping/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Mind Mapping & Visual Thinking
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../thinking/strategic-thinking/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Strategic Thinking
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_6" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../leadership/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Leadership & Influence
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_6" id="__nav_2_6_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_6">
            <span class="md-nav__icon md-icon"></span>
            Leadership & Influence
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../leadership/technical-vision/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Technical Vision & Purpose
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../leadership/influencing-without-authority/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Influencing Without Authority
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../leadership/advanced-conflict-resolution/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Advanced Conflict Resolution
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../leadership/giving-receiving-feedback/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Giving & Receiving Feedback
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../leadership/delivering-difficult-messages/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Delivering Difficult Messages
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../leadership/advanced-mentorship-career-development/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Advanced Mentorship & Career Development
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../leadership/vulnerability-leadership/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Vulnerability in Leadership
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../leadership/self-awareness-personality-types/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Self-Awareness & Personality Types
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../leadership/psychological-safety-trust/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Psychological Safety & Trust
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../leadership/power-influence-organizations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Power & Influence in Organizations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../leadership/storytelling-for-engineers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Storytelling for Engineers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../leadership/technical-writing-for-influence/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Technical Writing for Influence
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../leadership/presentation-persuasion-skills/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Presentation & Persuasion Skills
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../leadership/working-across-boundaries/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Working Across Boundaries
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../leadership/async-communication/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Asynchronous Communication
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../leadership/navigating-tough-technical-discussions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Navigating Tough Technical Discussions
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_7" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../teamwork/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Teamwork & Collaboration
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_7" id="__nav_2_7_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_7">
            <span class="md-nav__icon md-icon"></span>
            Teamwork & Collaboration
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../teamwork/organizational-design/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Organizational Design
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../teamwork/team-formation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Team Formation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../teamwork/cultural-transformation-psychological-safety/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Cultural Transformation & Psychological Safety
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../teamwork/five-dysfunctions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Five Dysfunctions of a Team
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../teamwork/cross-functional-collaboration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Cross-Functional Collaboration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../teamwork/mismanagement-agreement/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Mismanagement Agreement
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../teamwork/psychological-safety/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Psychological Safety
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../teamwork/culture-map/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    The Culture Map
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_8" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../execution/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Execution & Delivery
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_8" id="__nav_2_8_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_8">
            <span class="md-nav__icon md-icon"></span>
            Execution & Delivery
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../execution/agile-essentials/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Agile Essentials
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../execution/decision-making-frameworks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Decision-Making Frameworks
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../execution/strategic-thinking/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Strategic Thinking
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../execution/change-management-technical-transformations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Change Management for Technical Transformations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../execution/business-case/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Building a Business Case
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../execution/speed-vs-quality/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Speed vs. Quality
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../execution/navigating-uncertainty/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Navigating Uncertainty & Change
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../execution/prioritization-frameworks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Prioritization Frameworks
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../execution/organizational-transformation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Organizational Transformation
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_9" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../business/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Business Alignment
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_9" id="__nav_2_9_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_9">
            <span class="md-nav__icon md-icon"></span>
            Business Alignment
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../business/aligning-technology/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Aligning Technology to Business Strategy
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../business/product-engineering-collaboration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Product-Engineering Collaboration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../business/engineering-metrics-business-alignment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Engineering Metrics & Business Alignment
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../business/pitching-to-executives/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Pitching to Executives
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../business/business-case/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Building a Better Business Case
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../business/revenue-vs-risk/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Revenue vs. Risk
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../business/cost-optimization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Cost Optimization & FinOps
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../business/empowered-teams/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Empowered Teams & Engineering Culture
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_10" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../ethics/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Engineering Ethics
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_10" id="__nav_2_10_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_10">
            <span class="md-nav__icon md-icon"></span>
            Engineering Ethics
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ethics/bias-in-automation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Bias in Automation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ethics/data-privacy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Data Privacy & User Trust
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ethics/ethical-frameworks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ethical Frameworks
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ethics/ethics-of-scale/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    The Ethics of Scale
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ethics/responsible-innovation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Responsible Innovation
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../../reference/tags/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Reference
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="test-driven-development-design-through-testing">Test-Driven Development: Design Through Testing</h1>
<h2 id="the-scenario">The Scenario</h2>
<p>A team is struggling with quality issues. Features ship with bugs that should have been caught earlier. Changes in one area unexpectedly break functionality elsewhere. Engineers spend more time fixing defects than building new features. The codebase is difficult to refactor because engineers fear breaking existing functionality. There are some tests, but they're brittle, slow, and frequently fail for unrelated reasons.</p>
<p>This team needs more than just "more tests"—they need a fundamental shift in how they think about testing. Test-Driven Development (TDD) isn't just a testing methodology; it's a design methodology that produces testable, modular, and maintainable code. As a Staff Engineer, mastering TDD and helping your team adopt it can dramatically improve both code quality and development velocity.</p>
<h2 id="what-tdd-is-and-isnt">What TDD Is (and Isn't)</h2>
<h3 id="tdd-is">TDD Is:</h3>
<ul>
<li>A design approach that uses tests to drive implementation</li>
<li>A rapid feedback cycle for developers</li>
<li>A way to build a comprehensive regression suite as a byproduct of development</li>
<li>A technique for writing only the code that's needed</li>
</ul>
<h3 id="tdd-isnt">TDD Isn't:</h3>
<ul>
<li>Writing tests after implementation to verify behavior</li>
<li>A replacement for other types of testing (e.g., integration, system)</li>
<li>A guarantee of good design (it supports good design but doesn't ensure it)</li>
<li>A silver bullet for all quality problems</li>
</ul>
<h2 id="the-tdd-cycle-red-green-refactor">The TDD Cycle: Red, Green, Refactor</h2>
<p>The fundamental TDD workflow consists of three repeating steps:</p>
<h3 id="1-red-write-a-failing-test">1. Red: Write a Failing Test</h3>
<p>Write a small test that defines a function or improvement you want to make. Run it and watch it fail. This ensures your test is actually testing something and provides the "problem statement" you're about to solve.</p>
<div class="highlight"><pre><span></span><code><span class="c1">// Red: A failing test for a not-yet-implemented function</span>
<span class="nx">test</span><span class="p">(</span><span class="s1">&#39;should calculate total price including tax&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">cart</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">ShoppingCart</span><span class="p">();</span>
<span class="w">  </span><span class="nx">cart</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="ow">new</span><span class="w"> </span><span class="nx">Product</span><span class="p">(</span><span class="s1">&#39;book&#39;</span><span class="p">,</span><span class="w"> </span><span class="mf">10.0</span><span class="p">));</span>

<span class="w">  </span><span class="nx">expect</span><span class="p">(</span><span class="nx">cart</span><span class="p">.</span><span class="nx">getTotalWithTax</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)).</span><span class="nx">toBe</span><span class="p">(</span><span class="mf">11.0</span><span class="p">);</span><span class="w"> </span><span class="c1">// 10.00 + 10% tax</span>
<span class="p">});</span>
</code></pre></div>
<h3 id="2-green-write-just-enough-code-to-pass">2. Green: Write Just Enough Code to Pass</h3>
<p>Write the simplest code that will make the test pass. Don't worry about elegance yet—focus on making it work.</p>
<div class="highlight"><pre><span></span><code><span class="c1">// Green: The simplest implementation that passes the test</span>
<span class="kd">class</span><span class="w"> </span><span class="nx">ShoppingCart</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kr">constructor</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">items</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[];</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="nx">add</span><span class="p">(</span><span class="nx">product</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">items</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">product</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="nx">getTotalWithTax</span><span class="p">(</span><span class="nx">taxRate</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">subtotal</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">items</span><span class="p">.</span><span class="nx">reduce</span><span class="p">(</span>
<span class="w">      </span><span class="p">(</span><span class="nx">sum</span><span class="p">,</span><span class="w"> </span><span class="nx">product</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">sum</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">product</span><span class="p">.</span><span class="nx">price</span><span class="p">,</span>
<span class="w">      </span><span class="mf">0</span>
<span class="w">    </span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">subtotal</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="mf">1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">taxRate</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="3-refactor-improve-the-implementation">3. Refactor: Improve the Implementation</h3>
<p>Now that you have a passing test, you can safely refactor your code. The test ensures you don't break functionality while cleaning up the implementation.</p>
<div class="highlight"><pre><span></span><code><span class="c1">// Refactor: Improving the design while keeping the test green</span>
<span class="kd">class</span><span class="w"> </span><span class="nx">ShoppingCart</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kr">constructor</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">items</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[];</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="nx">add</span><span class="p">(</span><span class="nx">product</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">items</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">product</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="nx">getSubtotal</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">items</span><span class="p">.</span><span class="nx">reduce</span><span class="p">((</span><span class="nx">sum</span><span class="p">,</span><span class="w"> </span><span class="nx">product</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">sum</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">product</span><span class="p">.</span><span class="nx">price</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="nx">getTotalWithTax</span><span class="p">(</span><span class="nx">taxRate</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">getSubtotal</span><span class="p">()</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="mf">1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">taxRate</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h2 id="tdd-as-a-design-tool">TDD as a Design Tool</h2>
<p>TDD's most powerful benefit isn't catching bugs—it's driving better design:</p>
<h3 id="1-interfaces-before-implementation">1. Interfaces Before Implementation</h3>
<p>TDD forces you to think about how your code will be used before you write it. This leads to more intuitive APIs and better abstraction.</p>
<p><strong>Before TDD thinking:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1">// Implementation-focused, unclear interface</span>
<span class="kd">class</span><span class="w"> </span><span class="nx">UserService</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">async</span><span class="w"> </span><span class="nx">process</span><span class="p">(</span><span class="nx">userData</span><span class="p">,</span><span class="w"> </span><span class="nx">type</span><span class="p">,</span><span class="w"> </span><span class="nx">sendEmail</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Complex implementation mixing concerns</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p><strong>After TDD thinking:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1">// Clear interface, separated concerns</span>
<span class="kd">class</span><span class="w"> </span><span class="nx">UserService</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">async</span><span class="w"> </span><span class="nx">register</span><span class="p">(</span><span class="nx">user</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">}</span>
<span class="w">  </span><span class="k">async</span><span class="w"> </span><span class="nx">update</span><span class="p">(</span><span class="nx">userId</span><span class="p">,</span><span class="w"> </span><span class="nx">changes</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">}</span>
<span class="w">  </span><span class="k">async</span><span class="w"> </span><span class="nx">deactivate</span><span class="p">(</span><span class="nx">userId</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">}</span>
<span class="p">}</span>

<span class="kd">class</span><span class="w"> </span><span class="nx">NotificationService</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">async</span><span class="w"> </span><span class="nx">notifyUserRegistration</span><span class="p">(</span><span class="nx">user</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="2-separation-of-concerns">2. Separation of Concerns</h3>
<p>When code is hard to test, it's usually a sign of poor design. TDD naturally pushes you toward:</p>
<ul>
<li>Smaller, focused functions and classes</li>
<li>Dependency injection for better testability</li>
<li>Clear separation of business logic from I/O</li>
<li>Explicit rather than implicit dependencies</li>
</ul>
<h3 id="3-just-enough-generalization">3. Just Enough Generalization</h3>
<p>TDD helps you find the right level of abstraction:</p>
<ul>
<li>Write one test: You'll likely hardcode a solution</li>
<li>Write two tests: You might duplicate logic</li>
<li>Write three tests: You'll likely refactor to a proper abstraction</li>
</ul>
<h2 id="testing-patterns-for-different-code-types">Testing Patterns for Different Code Types</h2>
<p>Different types of code require different testing approaches:</p>
<h3 id="1-domain-logic-and-algorithms">1. Domain Logic and Algorithms</h3>
<ul>
<li><strong>Focus on:</strong> Input/output pairs, edge cases, error conditions</li>
<li><strong>Pattern:</strong> Write tests with representative examples of input data and expected outputs</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="nx">test</span><span class="p">(</span><span class="s1">&#39;should calculate correct discounts for loyalty program&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">discountCalculator</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">DiscountCalculator</span><span class="p">();</span>

<span class="w">  </span><span class="c1">// New customer (0 years)</span>
<span class="w">  </span><span class="nx">expect</span><span class="p">(</span><span class="nx">discountCalculator</span><span class="p">.</span><span class="nx">calculate</span><span class="p">(</span><span class="mf">100</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">)).</span><span class="nx">toBe</span><span class="p">(</span><span class="mf">0</span><span class="p">);</span>

<span class="w">  </span><span class="c1">// 1-year customer (5% discount)</span>
<span class="w">  </span><span class="nx">expect</span><span class="p">(</span><span class="nx">discountCalculator</span><span class="p">.</span><span class="nx">calculate</span><span class="p">(</span><span class="mf">100</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">)).</span><span class="nx">toBe</span><span class="p">(</span><span class="mf">5</span><span class="p">);</span>

<span class="w">  </span><span class="c1">// 5-year customer (10% discount)</span>
<span class="w">  </span><span class="nx">expect</span><span class="p">(</span><span class="nx">discountCalculator</span><span class="p">.</span><span class="nx">calculate</span><span class="p">(</span><span class="mf">100</span><span class="p">,</span><span class="w"> </span><span class="mf">5</span><span class="p">)).</span><span class="nx">toBe</span><span class="p">(</span><span class="mf">10</span><span class="p">);</span>

<span class="w">  </span><span class="c1">// Maximum discount cap (15%)</span>
<span class="w">  </span><span class="nx">expect</span><span class="p">(</span><span class="nx">discountCalculator</span><span class="p">.</span><span class="nx">calculate</span><span class="p">(</span><span class="mf">100</span><span class="p">,</span><span class="w"> </span><span class="mf">20</span><span class="p">)).</span><span class="nx">toBe</span><span class="p">(</span><span class="mf">15</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>
<h3 id="2-object-oriented-code">2. Object-Oriented Code</h3>
<ul>
<li><strong>Focus on:</strong> Behavior, state changes, interactions between objects</li>
<li><strong>Pattern:</strong> Use given-when-then structure (Behavior-Driven Development style)</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="nx">test</span><span class="p">(</span><span class="s1">&#39;order state should change when paid&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// Given</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">order</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Order</span><span class="p">(</span><span class="nx">items</span><span class="p">,</span><span class="w"> </span><span class="nx">customer</span><span class="p">);</span>
<span class="w">  </span><span class="nx">expect</span><span class="p">(</span><span class="nx">order</span><span class="p">.</span><span class="nx">status</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="s1">&#39;PENDING&#39;</span><span class="p">);</span>

<span class="w">  </span><span class="c1">// When</span>
<span class="w">  </span><span class="nx">order</span><span class="p">.</span><span class="nx">markAsPaid</span><span class="p">();</span>

<span class="w">  </span><span class="c1">// Then</span>
<span class="w">  </span><span class="nx">expect</span><span class="p">(</span><span class="nx">order</span><span class="p">.</span><span class="nx">status</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="s1">&#39;PAID&#39;</span><span class="p">);</span>
<span class="w">  </span><span class="nx">expect</span><span class="p">(</span><span class="nx">order</span><span class="p">.</span><span class="nx">paidAt</span><span class="p">).</span><span class="nx">toBeDefined</span><span class="p">();</span>
<span class="p">});</span>
</code></pre></div>
<h3 id="3-external-dependencies">3. External Dependencies</h3>
<ul>
<li><strong>Focus on:</strong> Isolating the system under test from external dependencies</li>
<li><strong>Pattern:</strong> Use test doubles (mocks, stubs, spies)</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="nx">test</span><span class="p">(</span><span class="s1">&#39;should send notification when order is shipped&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// Arrange</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">notificationService</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">sendShipmentNotification</span><span class="o">:</span><span class="w"> </span><span class="nx">jest</span><span class="p">.</span><span class="nx">fn</span><span class="p">().</span><span class="nx">mockResolvedValue</span><span class="p">(</span><span class="kc">true</span><span class="p">),</span>
<span class="w">  </span><span class="p">};</span>

<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">order</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Order</span><span class="p">(</span><span class="nx">items</span><span class="p">,</span><span class="w"> </span><span class="nx">customer</span><span class="p">);</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">shipmentService</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">ShipmentService</span><span class="p">(</span><span class="nx">notificationService</span><span class="p">);</span>

<span class="w">  </span><span class="c1">// Act</span>
<span class="w">  </span><span class="k">await</span><span class="w"> </span><span class="nx">shipmentService</span><span class="p">.</span><span class="nx">ship</span><span class="p">(</span><span class="nx">order</span><span class="p">);</span>

<span class="w">  </span><span class="c1">// Assert</span>
<span class="w">  </span><span class="nx">expect</span><span class="p">(</span><span class="nx">notificationService</span><span class="p">.</span><span class="nx">sendShipmentNotification</span><span class="p">).</span><span class="nx">toHaveBeenCalledWith</span><span class="p">(</span>
<span class="w">    </span><span class="nx">customer</span><span class="p">.</span><span class="nx">email</span><span class="p">,</span>
<span class="w">    </span><span class="nx">order</span><span class="p">.</span><span class="nx">id</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>
<h2 id="advanced-testing-patterns-for-complex-systems">Advanced Testing Patterns for Complex Systems</h2>
<h3 id="the-xunit-test-patterns-approach">The xUnit Test Patterns Approach</h3>
<p>Gerard Meszaros's comprehensive work on testing patterns provides a systematic approach to handling complex testing scenarios that staff engineers frequently encounter. These patterns transform testing from ad-hoc problem-solving into disciplined engineering practices.</p>
<p><strong>Test Double Patterns: Beyond Simple Mocks</strong></p>
<p>Most teams use test doubles inconsistently, creating confusion about when to use mocks versus stubs versus fakes. Understanding the specific patterns helps you choose the right approach for each testing scenario.</p>
<p><strong>Dummy Objects</strong> are the simplest test doubles—objects that are passed around but never actually used. They're useful when you need to fill parameter lists but the specific values don't matter for the test.</p>
<div class="highlight"><pre><span></span><code><span class="nx">test</span><span class="p">(</span><span class="s1">&#39;should create user account with any payment method&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">dummyPaymentMethod</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{};</span><span class="w"> </span><span class="c1">// Dummy - not used in this test</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">userService</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">UserService</span><span class="p">(</span><span class="nx">dummyPaymentMethod</span><span class="p">);</span>

<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">userService</span><span class="p">.</span><span class="nx">createAccount</span><span class="p">(</span><span class="s1">&#39;test@example.com&#39;</span><span class="p">);</span>
<span class="w">  </span><span class="nx">expect</span><span class="p">(</span><span class="nx">user</span><span class="p">.</span><span class="nx">email</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="s1">&#39;test@example.com&#39;</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>
<p><strong>Stub Objects</strong> provide canned answers to calls made during the test, typically not responding to anything outside what's programmed in for the test. Stubs are perfect when you need to control what a dependency returns without caring about the interaction itself.</p>
<div class="highlight"><pre><span></span><code><span class="nx">test</span><span class="p">(</span><span class="s1">&#39;should apply premium discount for premium customers&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// Stub always returns premium status</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">customerServiceStub</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">getCustomerTier</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;PREMIUM&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="p">};</span>

<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">pricingService</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">PricingService</span><span class="p">(</span><span class="nx">customerServiceStub</span><span class="p">);</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">price</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">pricingService</span><span class="p">.</span><span class="nx">calculatePrice</span><span class="p">(</span><span class="mf">100</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;customer-123&#39;</span><span class="p">);</span>

<span class="w">  </span><span class="nx">expect</span><span class="p">(</span><span class="nx">price</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="mf">85</span><span class="p">);</span><span class="w"> </span><span class="c1">// 15% premium discount applied</span>
<span class="p">});</span>
</code></pre></div>
<p><strong>Mock Objects</strong> are pre-programmed with expectations which form a specification of the calls they are expected to receive. They verify both the result and the interaction, making them perfect for testing communication between objects.</p>
<div class="highlight"><pre><span></span><code><span class="nx">test</span><span class="p">(</span><span class="s1">&#39;should notify audit service when user logs in&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">auditServiceMock</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">logUserActivity</span><span class="o">:</span><span class="w"> </span><span class="nx">jest</span><span class="p">.</span><span class="nx">fn</span><span class="p">(),</span>
<span class="w">  </span><span class="p">};</span>

<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">authService</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">AuthService</span><span class="p">(</span><span class="nx">auditServiceMock</span><span class="p">);</span>
<span class="w">  </span><span class="nx">authService</span><span class="p">.</span><span class="nx">login</span><span class="p">(</span><span class="s1">&#39;user@example.com&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;password&#39;</span><span class="p">);</span>

<span class="w">  </span><span class="c1">// Mock verifies the interaction occurred</span>
<span class="w">  </span><span class="nx">expect</span><span class="p">(</span><span class="nx">auditServiceMock</span><span class="p">.</span><span class="nx">logUserActivity</span><span class="p">).</span><span class="nx">toHaveBeenCalledWith</span><span class="p">(</span>
<span class="w">    </span><span class="s1">&#39;LOGIN&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="s1">&#39;user@example.com&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">expect</span><span class="p">.</span><span class="nx">any</span><span class="p">(</span><span class="nb">Date</span><span class="p">)</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>
<p><strong>Fake Objects</strong> have working implementations, but usually take some shortcut which makes them not suitable for production. Database fakes that use in-memory storage instead of real databases are classic examples.</p>
<div class="highlight"><pre><span></span><code><span class="c1">// Fake repository for testing</span>
<span class="kd">class</span><span class="w"> </span><span class="nx">FakeUserRepository</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kr">constructor</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">users</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Map</span><span class="p">();</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">nextId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="nx">save</span><span class="p">(</span><span class="nx">user</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">user</span><span class="p">.</span><span class="nx">id</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">user</span><span class="p">.</span><span class="nx">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">nextId</span><span class="o">++</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">users</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="nx">user</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">...</span><span class="nx">user</span><span class="w"> </span><span class="p">});</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">user</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="nx">findById</span><span class="p">(</span><span class="nx">id</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">users</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">id</span><span class="p">)</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p><strong>Fixture Management Patterns</strong></p>
<p>Real systems accumulate complex setup requirements that can make tests unwieldy. xUnit Test Patterns provides several strategies for managing this complexity.</p>
<p><strong>Fresh Fixture</strong> creates a completely new test fixture for each test, ensuring complete isolation but potentially sacrificing performance.</p>
<p><strong>Shared Fixture</strong> uses the same instance of the fixture across multiple tests, improving performance but risking test interdependencies.</p>
<p><strong>Lazy Setup</strong> defers expensive fixture creation until it's actually needed, improving test suite performance by avoiding unnecessary work.</p>
<div class="highlight"><pre><span></span><code><span class="c1">// Lazy Setup pattern for expensive database fixtures</span>
<span class="kd">class</span><span class="w"> </span><span class="nx">DatabaseTestFixture</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kr">constructor</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">_database</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">_testData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="nx">get</span><span class="w"> </span><span class="nx">database</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">_database</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">this</span><span class="p">.</span><span class="nx">_database</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">createTestDatabase</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">_database</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="nx">get</span><span class="w"> </span><span class="nx">testData</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">_testData</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">this</span><span class="p">.</span><span class="nx">_testData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">loadTestData</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">database</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">_testData</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="c1">// Expensive operations only run when needed</span>
<span class="w">  </span><span class="nx">createTestDatabase</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="cm">/* ... */</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span><span class="nx">loadTestData</span><span class="p">(</span><span class="nx">db</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="cm">/* ... */</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p><strong>Result Verification Patterns</strong></p>
<p>Different testing situations require different approaches to verifying that the system under test behaved correctly.</p>
<p><strong>State Verification</strong> checks that the system ended up in the expected state after calling the method under test. This is the most common form of verification, but it can be insufficient for testing interactions between objects.</p>
<p><strong>Behavior Verification</strong> uses mocks to verify that the correct methods were called on dependant objects. This is crucial for testing command objects and objects that primarily coordinate other objects' behavior.</p>
<div class="highlight"><pre><span></span><code><span class="nx">test</span><span class="p">(</span><span class="s1">&#39;should process payment and update order status&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">paymentProcessor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">jest</span><span class="p">.</span><span class="nx">fn</span><span class="p">().</span><span class="nx">mockResolvedValue</span><span class="p">({</span><span class="nx">success</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="nx">transactionId</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;123&#39;</span><span class="p">});</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">orderRepository</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">save</span><span class="o">:</span><span class="w"> </span><span class="nx">jest</span><span class="p">.</span><span class="nx">fn</span><span class="p">(),</span>
<span class="w">    </span><span class="nx">findById</span><span class="o">:</span><span class="w"> </span><span class="nx">jest</span><span class="p">.</span><span class="nx">fn</span><span class="p">().</span><span class="nx">mockReturnValue</span><span class="p">(</span><span class="nx">mockOrder</span><span class="p">)</span>
<span class="w">  </span><span class="p">};</span>

<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">orderService</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">OrderService</span><span class="p">(</span><span class="nx">paymentProcessor</span><span class="p">,</span><span class="w"> </span><span class="nx">orderRepository</span><span class="p">);</span>

<span class="w">  </span><span class="k">await</span><span class="w"> </span><span class="nx">orderService</span><span class="p">.</span><span class="nx">processPayment</span><span class="p">(</span><span class="s1">&#39;order-456&#39;</span><span class="p">);</span>

<span class="w">  </span><span class="c1">// Behavior verification - check the interactions occurred</span>
<span class="w">  </span><span class="nx">expect</span><span class="p">(</span><span class="nx">paymentProcessor</span><span class="p">).</span><span class="nx">toHaveBeenCalledWith</span><span class="p">(</span><span class="nx">mockOrder</span><span class="p">.</span><span class="nx">amount</span><span class="p">,</span><span class="w"> </span><span class="nx">mockOrder</span><span class="p">.</span><span class="nx">customerId</span><span class="p">);</span>
<span class="w">  </span><span class="nx">expect</span><span class="p">(</span><span class="nx">orderRepository</span><span class="p">.</span><span class="nx">save</span><span class="p">).</span><span class="nx">toHaveBeenCalledWith</span><span class="p">(</span><span class="nx">expect</span><span class="p">.</span><span class="nx">objectContaining</span><span class="p">({</span>
<span class="w">    </span><span class="nx">status</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;PAID&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">transactionId</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;123&#39;</span>
<span class="w">  </span><span class="p">}));</span>
<span class="p">});</span>
</code></pre></div>
<p><strong>Test Organization Patterns</strong></p>
<p>As test suites grow, organization becomes crucial for maintainability and comprehension.</p>
<p><strong>Test Class Hierarchy</strong> uses inheritance to share common setup and utilities across related test classes, but be careful not to create overly complex hierarchies that obscure test intent.</p>
<p><strong>Test Utility Classes</strong> extract common test operations into reusable utilities, keeping tests focused on their specific scenarios.</p>
<div class="highlight"><pre><span></span><code><span class="c1">// Test utility for creating test data</span>
<span class="kd">class</span><span class="w"> </span><span class="nx">TestDataBuilder</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">static</span><span class="w"> </span><span class="nx">user</span><span class="p">(</span><span class="nx">overrides</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{})</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;test-user-&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">(),</span>
<span class="w">      </span><span class="nx">email</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;test@example.com&#39;</span><span class="p">,</span>
<span class="w">      </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Test User&#39;</span><span class="p">,</span>
<span class="w">      </span><span class="nx">createdAt</span><span class="o">:</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Date</span><span class="p">(),</span>
<span class="w">      </span><span class="p">...</span><span class="nx">overrides</span><span class="p">,</span>
<span class="w">    </span><span class="p">};</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="k">static</span><span class="w"> </span><span class="nx">order</span><span class="p">(</span><span class="nx">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="nx">overrides</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{})</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;test-order-&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">(),</span>
<span class="w">      </span><span class="nx">customerId</span><span class="o">:</span><span class="w"> </span><span class="nx">user</span><span class="o">?</span><span class="p">.</span><span class="nx">id</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="s1">&#39;test-customer&#39;</span><span class="p">,</span>
<span class="w">      </span><span class="nx">amount</span><span class="o">:</span><span class="w"> </span><span class="mf">100.0</span><span class="p">,</span>
<span class="w">      </span><span class="nx">status</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;PENDING&#39;</span><span class="p">,</span>
<span class="w">      </span><span class="p">...</span><span class="nx">overrides</span><span class="p">,</span>
<span class="w">    </span><span class="p">};</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Usage in tests becomes more expressive</span>
<span class="nx">test</span><span class="p">(</span><span class="s1">&#39;should calculate shipping for international orders&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">internationalCustomer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">TestDataBuilder</span><span class="p">.</span><span class="nx">user</span><span class="p">({</span><span class="w"> </span><span class="nx">country</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Canada&#39;</span><span class="w"> </span><span class="p">});</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">order</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">TestDataBuilder</span><span class="p">.</span><span class="nx">order</span><span class="p">(</span><span class="nx">internationalCustomer</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">amount</span><span class="o">:</span><span class="w"> </span><span class="mf">50.0</span><span class="w"> </span><span class="p">});</span>

<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">shipping</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">shippingCalculator</span><span class="p">.</span><span class="nx">calculate</span><span class="p">(</span><span class="nx">order</span><span class="p">);</span>
<span class="w">  </span><span class="nx">expect</span><span class="p">(</span><span class="nx">shipping</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="mf">15.0</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>
<p><strong>Handling Test Smell Patterns</strong></p>
<p>Meszaros identifies several "test smells" that indicate problems with test design or implementation.</p>
<p><strong>Mystery Guest</strong> occurs when tests use external resources (like files or databases) without making it clear what data they depend on. The solution is to make test dependencies explicit and local to the test.</p>
<p><strong>Test Code Duplication</strong> happens when multiple tests repeat the same setup or verification logic. Extract common patterns into builder methods or test utilities.</p>
<p><strong>Hard-to-Test Code</strong> indicates design problems in the production code, often tight coupling or excessive dependencies. Use these testing difficulties as signals to improve the design of the code under test.</p>
<h2 id="common-tdd-challenges-and-solutions">Common TDD Challenges and Solutions</h2>
<h3 id="1-tdd-is-too-slow">1. "TDD is too slow"</h3>
<ul>
<li><strong>Reality:</strong> Initial TDD may feel slower, but it saves time by reducing debugging and rework</li>
<li><strong>Solution:</strong> Start with critical paths and high-risk areas; measure the time spent on bugs before and after</li>
</ul>
<h3 id="2-i-dont-know-what-to-test-first">2. "I don't know what to test first"</h3>
<ul>
<li><strong>Solution:</strong> Start with a simple "happy path" case, then add edge cases and error conditions</li>
<li><strong>Technique:</strong> Write a test list before you begin coding to outline the scenarios you'll cover</li>
</ul>
<h3 id="3-my-code-has-too-many-dependencies-to-test-easily">3. "My code has too many dependencies to test easily"</h3>
<ul>
<li><strong>Reality:</strong> This is a design smell TDD can help identify</li>
<li><strong>Solution:</strong> Use dependency injection and interfaces to decouple your code</li>
<li><strong>Refactoring Pattern:</strong> Extract Interface, Adapter, or Facade patterns to isolate hard-to-test components</li>
</ul>
<h3 id="4-tests-become-brittle-and-maintenance-heavy">4. "Tests become brittle and maintenance-heavy"</h3>
<ul>
<li><strong>Solution:</strong> Focus tests on behavior, not implementation details</li>
<li><strong>Technique:</strong> Use test fixtures and factories to reduce setup duplication</li>
<li><strong>Rule of Thumb:</strong> If a minor code change breaks many tests, those tests are too coupled to implementation</li>
</ul>
<h2 id="scaling-tdd-from-individual-practice-to-team-culture">Scaling TDD: From Individual Practice to Team Culture</h2>
<p>As a Staff Engineer, your role isn't just to practice TDD yourself—it's to help your team adopt it effectively:</p>
<h3 id="1-lead-by-example">1. Lead by Example</h3>
<ul>
<li>Demonstrate TDD in pair programming sessions</li>
<li>Share your test-first approach in code reviews</li>
<li>Make your thought process visible: "I'm starting with this test because..."</li>
</ul>
<h3 id="2-provide-the-right-tools">2. Provide the Right Tools</h3>
<ul>
<li>Set up fast, reliable test runners</li>
<li>Configure continuous integration to run tests automatically</li>
<li>Create test helpers and utilities that make testing easier</li>
</ul>
<h3 id="3-establish-testing-norms">3. Establish Testing Norms</h3>
<ul>
<li>Define acceptable test coverage thresholds</li>
<li>Create shared patterns and idioms for tests</li>
<li>Recognize and praise good testing practices</li>
</ul>
<h3 id="4-address-systemic-barriers">4. Address Systemic Barriers</h3>
<ul>
<li>Allocate time for improving test suites</li>
<li>Refactor hard-to-test code</li>
<li>Measure and celebrate improvements in quality metrics</li>
</ul>
<h2 id="advanced-tdd-techniques">Advanced TDD Techniques</h2>
<p>As your team matures in TDD practice, introduce more sophisticated techniques:</p>
<h3 id="1-outside-in-tdd-aka-london-school">1. Outside-In TDD (aka "London School")</h3>
<p>Starting from high-level behavior and working inward:</p>
<ul>
<li>Begin with acceptance tests describing user-visible behavior</li>
<li>Use mocks to define interfaces between components</li>
<li>Implement components to satisfy the interfaces</li>
</ul>
<h3 id="2-property-based-testing">2. Property-Based Testing</h3>
<p>Instead of specific examples, define properties your code should satisfy:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// Instead of specific examples:</span>
<span class="nx">test</span><span class="p">(</span><span class="s1">&#39;should sort numbers&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">expect</span><span class="p">(</span><span class="nx">sort</span><span class="p">([</span><span class="mf">3</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">])).</span><span class="nx">toEqual</span><span class="p">([</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">3</span><span class="p">]);</span>
<span class="p">});</span>

<span class="c1">// Property-based test:</span>
<span class="nx">fc</span><span class="p">.</span><span class="nx">property</span><span class="p">(</span>
<span class="w">  </span><span class="s1">&#39;sorted array has same elements in ascending order&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="nx">fc</span><span class="p">.</span><span class="nx">array</span><span class="p">(</span><span class="nx">fc</span><span class="p">.</span><span class="nx">integer</span><span class="p">()),</span>
<span class="w">  </span><span class="p">(</span><span class="nx">arr</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">sorted</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">sort</span><span class="p">(</span><span class="nx">arr</span><span class="p">);</span>
<span class="w">    </span><span class="nx">expect</span><span class="p">(</span><span class="nx">sorted</span><span class="p">.</span><span class="nx">length</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="nx">arr</span><span class="p">.</span><span class="nx">length</span><span class="p">);</span>
<span class="w">    </span><span class="nx">expect</span><span class="p">([...</span><span class="nx">sorted</span><span class="p">].</span><span class="nx">sort</span><span class="p">((</span><span class="nx">a</span><span class="p">,</span><span class="w"> </span><span class="nx">b</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nx">b</span><span class="p">)).</span><span class="nx">toEqual</span><span class="p">(</span><span class="nx">sorted</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">);</span>
</code></pre></div>
<h3 id="3-mutation-testing">3. Mutation Testing</h3>
<p>Ensure your tests actually verify the important behaviors:</p>
<ol>
<li>Automatically introduce "mutations" (bugs) into your code</li>
<li>Run your tests against the mutated code</li>
<li>If tests still pass, they're not adequately testing the mutated behavior</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="c1"># Using Stryker Mutator for JavaScript</span>
npx<span class="w"> </span>stryker<span class="w"> </span>run
</code></pre></div>
<p>By mastering TDD and helping your team adopt it, you create a virtuous cycle: better tests drive better design, which enables more confident refactoring, which improves code quality, which makes testing easier. It's one of the most powerful technical practices a Staff Engineer can champion.</p>
<h2 id="common-pitfalls-how-to-avoid-them">Common Pitfalls &amp; How to Avoid Them</h2>
<ul>
<li><strong>Overengineering Tests:</strong> Don't write tests for the sake of writing them. Each test should serve a specific purpose and test a clearly defined behavior.</li>
<li><strong>Neglecting Refactoring:</strong> Remember, refactoring is not optional in TDD; it’s essential to keep your codebase healthy and manageable. Strive for clean, maintainable code.</li>
<li><strong>Test Duplication:</strong> Avoid writing tests that simply replicate the functionality of existing code. Focus on testing the <em>behavior</em> of the code, not the implementation details.</li>
</ul>
<h2 id="a-practical-exercise-the-broken-calculator">A Practical Exercise: The Broken Calculator</h2>
<ul>
<li><strong>Objective:</strong> To illustrate the core Red-Green-Refactor cycle in a collaborative setting.</li>
<li><strong>Setup:</strong> Split the team into pairs. One person's role is to write tests for a basic calculator function (e.g., <code>add</code>, <code>subtract</code>); the other's role is to write the implementation.</li>
<li><strong>Execution:</strong> The test writer creates a failing test (Red). The implementer writes just enough code to make it pass (Green). Then, they refactor the code together while keeping the test green (Refactor). Switch roles and repeat for the next function.</li>
<li><strong>Debrief:</strong> This quick game highlights the TDD rhythm and its collaborative nature.</li>
</ul>
<h2 id="cross-reference-navigation">Cross-Reference Navigation</h2>
<h3 id="prerequisites-for-this-chapter">Prerequisites for This Chapter</h3>
<div class="grid cards">
<ul>
<li>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m20.71 4.63-1.34-1.34c-.37-.39-1.02-.39-1.41 0L9 12.25 11.75 15l8.96-8.96c.39-.39.39-1.04 0-1.41M7 14a3 3 0 0 0-3 3c0 1.31-1.16 2-2 2 .92 1.22 2.5 2 4 2a4 4 0 0 0 4-4 3 3 0 0 0-3-3"/></svg></span> <strong>Code Quality Fundamentals</strong></p>
<hr />
<p><strong>Refactoring and Clean Code Practices</strong></p>
<p><strong><a href="../code-hygiene/">Code Hygiene</a></strong> - Understanding refactoring principles supports the refactor phase of the Red-Green-Refactor cycle</p>
<p><strong><a href="../engineering-excellence/">Engineering Excellence</a></strong> - Quality practices and measurement frameworks provide foundation for TDD adoption</p>
</li>
</ul>
</div>
<h3 id="related-concepts">Related Concepts</h3>
<div class="grid cards">
<ul>
<li>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7 2v2h1v14a4 4 0 0 0 4 4 4 4 0 0 0 4-4V4h1V2zm4 14c-.6 0-1-.4-1-1s.4-1 1-1 1 .4 1 1-.4 1-1 1m2-4c-.6 0-1-.4-1-1s.4-1 1-1 1 .4 1 1-.4 1-1 1m1-5h-4V4h4z"/></svg></span> <strong>Advanced Testing Practices</strong></p>
<hr />
<p><strong>Comprehensive Testing Strategies</strong></p>
<p><strong><a href="../advanced-testing-strategies/">Advanced Testing Strategies</a></strong> - TDD provides foundation for comprehensive testing approaches and quality engineering practices</p>
<p><strong><a href="../engineering-excellence/">Engineering Excellence</a></strong> - Quality practices and testing frameworks support TDD implementation</p>
</li>
<li>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 5.5A3.5 3.5 0 0 1 15.5 9a3.5 3.5 0 0 1-3.5 3.5A3.5 3.5 0 0 1 8.5 9 3.5 3.5 0 0 1 12 5.5M5 8c.56 0 1.08.15 1.53.42-.15 1.43.27 2.85 1.13 3.96C7.16 13.34 6.16 14 5 14a3 3 0 0 1-3-3 3 3 0 0 1 3-3m14 0a3 3 0 0 1 3 3 3 3 0 0 1-3 3c-1.16 0-2.16-.66-2.66-1.62a5.54 5.54 0 0 0 1.13-3.96c.45-.27.97-.42 1.53-.42M5.5 18.25c0-2.07 2.91-3.75 6.5-3.75s6.5 1.68 6.5 3.75V20h-13zM0 20v-1.5c0-1.39 1.89-2.56 4.45-2.9-.59.68-.95 1.62-.95 2.65V20zm24 0h-3.5v-1.75c0-1.03-.36-1.97-.95-2.65 2.56.34 4.45 1.51 4.45 2.9z"/></svg></span> <strong>Team &amp; Cultural Development</strong></p>
<hr />
<p><strong>Collaborative Development Practices</strong></p>
<p><strong><a href="../../teamwork/team-formation/">Team Formation</a></strong> - TDD adoption requires team culture changes and collaborative development practices</p>
<p><strong><a href="../../teamwork/cultural-transformation-psychological-safety/">Cultural Transformation</a></strong> - Building psychological safety for TDD experimentation and learning</p>
</li>
<li>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9 2v6h2v3H5c-1.11 0-2 .89-2 2v3H1v6h6v-6H5v-3h6v3H9v6h6v-6h-2v-3h6v3h-2v6h6v-6h-2v-3c0-1.11-.89-2-2-2h-6V8h2V2z"/></svg></span> <strong>Architecture &amp; Design</strong></p>
<hr />
<p><strong>Design for Testability</strong></p>
<p><strong><a href="../clean-architecture/">Clean Architecture</a></strong> - Dependency inversion and layer separation enable comprehensive TDD practice</p>
<p><strong><a href="../hexagonal-architecture/">Hexagonal Architecture</a></strong> - Port and adapter patterns support TDD through clear interface definition</p>
</li>
</ul>
</div>
<h3 id="apply-these-concepts">Apply These Concepts</h3>
<div class="grid cards">
<ul>
<li>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m10 17-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9m-6-6a1 1 0 0 1 1 1 1 1 0 0 1-1 1 1 1 0 0 1-1-1 1 1 0 0 1 1-1m7 0h-4.18C14.4 1.84 13.3 1 12 1s-2.4.84-2.82 2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2"/></svg></span> <strong>Assessment &amp; Development</strong></p>
<hr />
<p><strong>Evaluate and track your TDD capabilities</strong></p>
<p><strong><a href="../../../appendix/tools/staff-engineer-competency-assessment/">Staff Engineer Competency Assessment</a></strong> - Assess your technical excellence and quality engineering capabilities including TDD proficiency</p>
<p><strong><a href="../../../appendix/tools/development-tracking-system/">Development Tracking System</a></strong> - Track progress in developing TDD and quality engineering skills</p>
</li>
</ul>
</div>
<h3 id="next-steps-in-your-learning-journey">Next Steps in Your Learning Journey</h3>
<div class="grid cards">
<ul>
<li>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m16 11.78 4.24-7.33 1.73 1-5.23 9.05-6.51-3.75L5.46 19H22v2H2V3h2v14.54L9.5 8z"/></svg></span> <strong>Expand Testing Excellence</strong></p>
<hr />
<p><strong>Master comprehensive quality engineering practices</strong></p>
<ol>
<li><strong><a href="../advanced-testing-strategies/">Advanced Testing Strategies</a></strong> - Build on TDD foundation with comprehensive testing approaches and quality practices</li>
<li><strong><a href="../clean-architecture/">Clean Architecture</a></strong> - Learn architectural patterns that enable effective TDD through testable design</li>
<li><strong><a href="../continuous-delivery/">Continuous Delivery</a></strong> - Integrate TDD practices with automated deployment pipelines and quality gates</li>
</ol>
</li>
</ul>
</div>
<h2 id="further-reading">Further Reading</h2>
<ul>
<li><em>Test Driven Development: By Example</em> by Kent Beck</li>
<li><em>Growing Object-Oriented Software, Guided by Tests</em> by Steve Freeman and Nat Pryce</li>
<li><em>Working Effectively with Legacy Code</em> by Michael Feathers</li>
</ul>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../cicd/" class="md-footer__link md-footer__link--prev" aria-label="Previous: CI/CD">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                CI/CD
              </div>
            </div>
          </a>
        
        
          
          <a href="../advanced-testing-strategies/" class="md-footer__link md-footer__link--next" aria-label="Next: Advanced Testing Strategies">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Advanced Testing Strategies
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.instant", "navigation.tracking", "navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "navigation.prune", "navigation.indexes", "navigation.expand", "navigation.top", "navigation.footer", "toc.integrate", "toc.follow", "content.tabs.link", "content.code.annotate", "content.action.edit", "content.action.view", "content.tooltips", "search.highlight", "search.suggest", "search.share"], "search": "../../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.56ea9cef.min.js"></script>
      
    
  </body>
</html>